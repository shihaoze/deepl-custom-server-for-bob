Aport: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
allow-lan: false
mode: rule
log-level: info
ipv6: false
hosts:
    services.googleapis.cn: 216.58.200.67
    www.google.cn: 216.58.200.67
external-controller: '0.0.0.0:9090'
clash-for-android:
    append-system-dns: false
profile:
    tracing: true
dns:
    enable: true
    listen: '127.0.0.1:8853'
    default-nameserver: [223.5.5.5, 1.0.0.1]
    ipv6: false
    enhanced-mode: fake-ip
    fake-ip-filter: ['*.lan', 'stun.*.*.*', 'stun.*.*', time.windows.com, time.nist.gov, time.apple.com, time.asia.apple.com, '*.ntp.org.cn', '*.openwrt.pool.ntp.org', time1.cloud.tencent.com, time.ustc.edu.cn, pool.ntp.org, ntp.ubuntu.com, ntp.aliyun.com, ntp1.aliyun.com, ntp2.aliyun.com, ntp3.aliyun.com, ntp4.aliyun.com, ntp5.aliyun.com, ntp6.aliyun.com, ntp7.aliyun.com, time1.aliyun.com, time2.aliyun.com, time3.aliyun.com, time4.aliyun.com, time5.aliyun.com, time6.aliyun.com, time7.aliyun.com, '*.time.edu.cn', time1.apple.com, time2.apple.com, time3.apple.com, time4.apple.com, time5.apple.com, time6.apple.com, time7.apple.com, time1.google.com, time2.google.com, time3.google.com, time4.google.com, music.163.com, '*.music.163.com', '*.126.net', musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, '*.kuwo.cn', api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, '*.y.qq.com', streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, '*.xiami.com', '*.music.migu.cn', music.migu.cn, '*.msftconnecttest.com', '*.msftncsi.com', localhost.ptlogin2.qq.com, '*.*.*.srv.nintendo.net', '*.*.stun.playstation.net', 'xbox.*.*.microsoft.com', '*.ipv6.microsoft.com', '*.*.xboxlive.com', speedtest.cros.wr.pvp.net]
    nameserver: ['https://223.6.6.6/dns-query', 'https://rubyfish.cn/dns-query', 'https://dns.pub/dns-query']
    fallback: ['https://dns.rubyfish.cn/dns-query', 'https://public.dns.iij.jp/dns-query', 'tls://8.8.4.4']
    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32, 127.0.0.1/32], domain: [+.google.com, +.facebook.com, +.twitter.com, +.youtube.com, +.xn--ngstr-lra8j.com, +.google.cn, +.googleapis.cn, +.googleapis.com, +.gvt1.com] }
proxies:
    -   name: Cloudflare
        type: wireguard
        # server: 188.114.96.156 # domain is supported
        # port: 859
        # server: 2606:4700:d1::49bd:cd49:50d6:d463
        # port: 3854
        server: 162.159.192.115
        port: 880
        ip: 172.16.0.2
        ipv6: 2606:4700:110:8d1a:a2f8:d8d0:3448:55f6 # optional
        private-key: qNHYj4748Rm/nvMxJPiW7Xvcm+TmdQD7L2FjNaJnLkc=
        public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo= # peer public key
        # preshared-key: # optional
        dns: [162.159.36.1, 2606:4700:4700::1111] # optional
        mtu: 1280 # optional
        reserved: [244,120,48] # optional
        keepalive: 45 # optional

    -   name: Korean
        type: vmess
        server: 162.159.62.93
        port: 443
        uuid: 98c56430-68ca-4b80-8a13-e843014f8f8f
        alterId: 0
        cipher: aes-128-gcm
        network: ws
        # skip-cert-verify: true
        ws-opts:
            path: /6Bfq0z52bxD
            headers:
                Host: shihaoze.eu
        tls: true
        ws-path: /6Bfq0z52bxD
        ws-headers:
            Host: shihaoze.eu

    -   name: HongKong
        type: trojan
        server: shz123.cf
        port: 443
        password: 'KO3I0hJnxAgWgxMo'
        upd: true
        tls: true
            
    -   name: Japan
        type: vmess
        server: 162.159.62.93
        port: 443
        uuid: faec360b-dd05-4871-a737-3c0fd2b45f12
        alterId: 0
        cipher: aes-128-gcm
        network: ws
        # skip-cert-verify: true
        ws-opts:
            path: /TSdcr
            headers:
                Host: 970706.xyz
        tls: true
        ws-path: /TSdcr
        ws-headers:
            Host: 970706.xyz

    -   name: US
        type: vmess
        server: 162.159.62.93
        port: 443
        uuid: d899e42a-ecf8-47fe-b2d4-e1647aae1bf6
        alterId: 0
        cipher: aes-128-gcm
        network: ws
        # skip-cert-verify: true
        ws-opts:
            path: /SysBiop9dJwu
            headers:
                Host: 960920.xyz
        tls: true
        ws-path: /SysBiop9dJwu
        ws-headers:
            Host: 960920.xyz

    -   name: Japan2
        type: vmess
        server: 162.159.62.93
        port: 443
        uuid: 485051a3-ac83-4e55-ab2f-2a18c429d1be
        alterId: 0
        cipher: aes-128-gcm
        network: ws
        # skip-cert-verify: true
        ws-opts:
            path: /b8tAV
            headers:
                Host: shihaoze.ml
        tls: true
        ws-path: /b8tAV
        ws-headers:
            Host: shihaoze.ml

    -   name: US2
        type: vmess
        server: 162.159.62.93
        port: 443
        uuid: 18667e06-8d6c-4663-9d4f-7bac2403accb
        alterId: 0
        cipher: aes-128-gcm
        network: ws
        # skip-cert-verify: true
        ws-opts:
            path: /OwIdE4cbWi
            headers:
                Host: shihaoze.tk
        tls: true
        ws-path: /OwIdE4cbWi
        ws-headers:
            Host: shihaoze.tk

proxy-groups:
 
- name: PROXY
  type: select
  proxies:
    - 负载均衡-轮询
    - 负载均衡-散列
    - Auto
    - Cloudflare
    - Korean
    - Japan
    - Japan2
    - US
    - US2
    - HongKong
    

- name: 负载均衡-散列
  type: load-balance
  url: http://www.google.com/generate_204
  interval: 300
  strategy: consistent-hashing
  proxies:
    - Cloudflare
    - Korean
    - Japan
    - Japan2
    - US
    - US2
    - DIRECT
    - HongKong

- name: 负载均衡-轮询
  type: load-balance
  url: http://www.google.com/generate_204
  interval: 300
  strategy: round-robin
  proxies:
    - Cloudflare
    - Korean
    - Japan
    - Japan2
    - US
    - US2
    - HongKong
    - DIRECT


- name: Auto
  type: url-test
  proxies:
    - Cloudflare
    - Korean
    - Japan
    - Japan2
    - US
    - US2
    - HongKong
    - DIRECT
  url: 'http://www.gstatic.com/generate_204'
  interval: 86400

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  greatfire:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt"
    path: ./ruleset/greatfire.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400
    
rules:
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,DIRECT
  - RULE-SET,proxy,PROXY
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,PROXY
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,PROXY